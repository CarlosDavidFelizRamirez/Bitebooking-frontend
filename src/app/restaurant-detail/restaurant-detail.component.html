<div class="container my-5 p-3 bg-white shadow-sm rounded">
  <div class="row">
    <div class="col-md-6 mb-3 mb-md-0">
      <img [src]="restaurant?.imageUrl?.startsWith('http') ? restaurant?.imageUrl : ('http://localhost:8080/files/' + restaurant?.imageUrl)" [alt]="restaurant?.name" class="img-fluid rounded">
    </div>
    <div class="col-md-6">
      <h1 class="h2">{{restaurant?.name}}</h1>
      <div class="mb-3">
        <p class="btn btn-outline-dark me-2">Tipo de Cocina: {{getRestaurantType(restaurant?.restaurantType)}}</p>
        <p href="tel:123456789" class="btn btn-outline-dark me-2">ðŸ“ž{{restaurant?.phone}}</p>
        <p class="btn btn-outline-dark me-2">ðŸŒŸ{{restaurant?.averageRating}}</p>
        <p class="btn btn-outline-dark me-2">Desde: {{formatTime(restaurant?.openingTime)}}, Hasta: {{formatTime(restaurant?.closingTime)}}</p>
        <div>
          <button [routerLink]="['/bookings', restaurant?.id, 'reserve']"type="button" class="btn btn-primary">
            <i class="bi bi-box-arrow-right" style="padding: 5%; min-width: 200px;"></i>Reservar</button>
        </div>
      </div>
      
      

      
      <div class="fw-bold fs-4">DescripciÃ³n</div>
      {{restaurant?.description}}
    </div>
    
  
  </div>
  
<div class="menu-section py-4">
  <h2 class="h5 mb-3">MenÃºs</h2>
  <div class="row">
    @for (menu of menus; track menu) {
        <!-- Si es url externa entonces ya trae la ruta completa absoluta-->
        <div class="col-md-4 mb-3">
          <div class="card h-100" [routerLink]="['/menus', menu?.id, 'detail']" style="cursor: pointer;">
            <img class="card-img-top"[src]="menu.imgMenu.startsWith('http') ? menu.imgMenu : ('http://localhost:8080/files/' + menu.imgMenu)" class="card-img-top" [alt]="menu.title">
            <div class="card-body">
              <h5 class="card-title">{{menu?.title}}</h5>
              <p class="card-text">{{menu?.description}}</p>
              <div class="card-footer">
              </div>
            </div>
          </div>
        </div>  
      
  }
</div>
@if (canEdit) {
<div>
  <button class="btn btn-outline-dark me-2" [routerLink]="['/menus',restaurant?.id, 'create']">Crear Menu</button>
  <button class="btn btn-outline-dark me-2" [routerLink]="['/restaurant',restaurant?.id,'update']">Actualizar mi restaurante</button>
</div>
}

  <div class="recommendation-section py-4">
    <h2 class="h5 mb-3">Recomendaciones de Restaurantes</h2>
    <div class="row">
      @for (restaurant of recommendedRestaurants; track restaurant) {
        <div class="col-md-4 mb-3">
          <div class="card h-100" [routerLink]="['/restaurant',restaurant.id,'detail']" style="cursor: pointer;">
            <img class="card-img-top" [src]="restaurant.imageUrl.startsWith('http') ? restaurant.imageUrl : 'http://localhost:8080/files/' + restaurant.imageUrl" alt="Restaurant 1">
            <div class="card-body">
              <h5 class="card-title">{{restaurant.name}}</h5>
              <p class="card-text">{{restaurant.description}}</p>
              <div class="card-footer">
              </div>
            </div>
          </div>
        </div>
      }
      </div>
</div>
<div class="container">
  <div class="col">

      <h2 class="title text-center m-5">Reservas activas</h2>

      @for (booking of bookings; track booking.id ) {
      @if (booking.status == true ) {
      <table class="table">
          <div class="container-fluid text-center position-relative">
              <div class="row">
                  <div class="card card-cover h-100 overflow-hidden text-bg-dark rounded-4 shadow-lg">
                      <div >
                        <img class="card-img-top" [src]="booking.restaurant.imageUrl.startsWith('http') ? booking.restaurant.imageUrl : 'http://localhost:8080/files/' + booking.restaurant.imageUrl" alt="Restaurant 1">

                      </div>

                      <div class="container-fluid custom">
                          <thead>

                              <tr>

                                  <th scope="col">Id</th>
                                  <th scope="col ">Title</th>
                                  <th scope="col">Available</th>
                                  <th scope="col">Table</th>
                                  <th scope="col">Fecha de reserva</th>
                                  <th scope="col">MenÃº Seleccionado</th>
                                  <th scope="col">Restaurant</th>

                              </tr>

                          </thead>

                          <tbody>

                              <th scope="row">{{booking.id}}</th>
                              <td>
                                  <h3>{{booking.user.firstName}} {{booking.user.lastName}}</h3>
                              </td>
                              <td>
                                  @if (booking.status) {
                                  <span class="badge text-bg-success">SÃ­</span>
                                  } @else{
                                  <span class="badge text-bg-danger">No</span>
                                  }
                              </td>

                              <td>{{booking.numTable}}</td>
                              <td>{{booking.createDate | date: 'dd/MM/yy' }}</td>
                           
                              <td>
                                  <a class="badge text-bg-warning text-decoration-none"
                                      [routerLink]="['/restaurants', booking.restaurant.id, 'detail']">
                                      {{booking.restaurant.name}}
                                  </a>
                              </td>

                              <div class="buttons">
                                  <button class="btn btn-outline-light"
                                      [routerLink]="['/bookings', booking.id, 'detail']">Ver
                                      Reserva</button>

                                  <button class="btn btn-outline-success ms-2"
                                      [routerLink]="['/bookings', booking.id, 'update']">Editar
                                      Reserva</button>

                              </div>

                          </tbody>
                      </div>
                  </div>
              </div>



          </div>

      </table>
      }




      } @empty {
      <p>No hay Reservas actualmente.</p>
      }

      <h2 class="title text-center m-5">Reservas inactivas</h2>

      @for (booking of bookings; track booking.id) {

      @if (booking.status == false ) {
      <table class="table">
          <div class="container-fluid text-center position-relative">
              <div class="row">
                  <div class="card card-cover h-100 overflow-hidden text-bg-dark rounded-4 shadow-lg">
                      <div >
                        <img class="card-img-top" [src]="booking.restaurant.imageUrl.startsWith('http') ? booking.restaurant.imageUrl : 'http://localhost:8080/files/' + booking.restaurant.imageUrl" alt="Restaurant 1">

                      </div>

                      <div class="container-fluid custom">
                          <thead>

                              <tr>

                                  <th scope="col">Id</th>
                                  <th scope="col ">Title</th>
                                  <th scope="col">Available</th>
                                  <th scope="col">Table</th>
                                  <th scope="col">Fecha de reserva</th>
                                  <th scope="col">MenÃº Seleccionado</th>
                                  <th scope="col">Restaurant</th>

                              </tr>

                          </thead>

                          <tbody>

                              <th scope="row">{{booking.id}}</th>
                              <td>
                                  <h3>{{booking.user.firstName}}</h3>
                              </td>
                              <td>
                                  @if (booking.status) {
                                  <span class="badge text-bg-success">SÃ­</span>
                                  } @else{
                                  <span class="badge text-bg-danger">No</span>
                                  }
                              </td>

                              <td>{{booking.numTable}}</td>
                              <td>{{booking.createDate | date: 'dd/MM/yy' }}</td>
                              <td>
                                 
                              </td>
                              <td>
                                  <a class="badge text-bg-warning text-decoration-none"
                                      [routerLink]="['/restaurants', booking.restaurant.id, 'detail']">
                                      {{booking.restaurant.name}}
                                  </a>
                              </td>

                              <div class="buttons">
                                  <button class="btn btn-outline-light"
                                      [routerLink]="['/bookings', booking.id, 'detail']">Ver
                                      Reserva</button>

                                  <button class="btn btn-outline-success ms-2"
                                      [routerLink]="['/bookings', booking.id, 'update']">Editar
                                      Reserva</button>



                              </div>

                          </tbody>
                      </div>
                  </div>
              </div>



          </div>

      </table>
      }




      } @empty {
      <p>No hay Reservas actualmente.</p>
      }





  </div>
</div>
